<div class="questionForm">
  <h2><%= title %></h2>
  <%= error_view(flash.now[:error]).html_safe %>
  <%= form_for @question, url: path do |f| %>
    内容：<%= f.text_area :content, rows: 3, cols: 10, id: "questionContent" %> &nbsp;&nbsp;&nbsp;&nbsp; <%= button_tag "レンダー →→", class: "btn btn-primary", id: "markdownRenderBtn", type: "button" %><br/>
    タグ：<%= f.select :tag_id, options_for_select(@tags, f.object.tag_id) %><br/>
    時間：<%= f.select :time, options_for_select(@timerange, f.object.time) %>秒<br/>
    レベル：<%= slider_view(Question::LEVELNUM, f.object.level.to_i).html_safe %>
    <span id="levelNum"><%= f.object.level.to_i == 0 ? 1 : f.object.level.to_i %></span><br/>
    <%= f.hidden_field :level, value: f.object.level.to_i %>
    <%= f.fields_for :answers do |builder| %>
    <div class="answerRow">
      <%= builder.label :content, "回答内容", class: "answerInput" %>
      <%= builder.text_field :content, :rows => 1, class: "answerInput" %>
      <%= builder.label :flag, "正" %>
      <%= builder.radio_button :flag, {disabled: builder.object.flag == 0}, class: "answerFlagRadio", name: "answerFlagRadio" %>
      <br/>
    </div>
    <% end %>
    <%= f.submit submit_btn, class: "btn btn-primary" if submit_btn%>
  <% end %>
</div>
<div class="iphone">
  <div class="markdownRender">
  </div>
</div>


<%= javascript_include_tag 'bootstrap-slider' %>
<%= stylesheet_link_tag 'slider' %>
<script type="text/javascript">
  $(document).ready(function() {
    value = $("#levelNum").html();
    console.log(value);  
    $(".slider").slider({value: parseInt(value)})
      .on('slide', function(ev) {
        $(this).closest('form').find('#question_level').val(ev.value);
        $(this).closest('form').find('#levelNum').html(ev.value);
      });
    $("#markdownRenderBtn").click(function() {
      text = $("#questionContent").val();
      $.post("/admin/markdown", {text: text}, function(data) {
        $(".markdownRender").html(data);  
      });
      });
    $(".answerFlagRadio").click(function() {
    });

  });
</script>
